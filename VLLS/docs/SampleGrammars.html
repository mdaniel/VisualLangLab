<html>
  <head>
    <title>Sample Grammars</title>
    <meta name="description" content="Describes how to view and use the Sample grammars bundled with VisualLangLab" />
  </head>

  <body>
    <h1>VisualLangLab - Sample Grammars</h1>

<table border="1" style="border: 1px solid red;" width="100%"><tr><td>
<span style="font-size: larger;">For Ver-10.10 or higher only!</span><br/>
If you are using an older version, follow 
<a href="SampleGrammars-legacy.html">this tutorial</a> instead. 
Beginning Ver-10.01, the title bar of the <i>About VisualLangLab</i> 
dialog box displays the version number. 
The latest jar file can be downloaded here: 
<a href="http://java.net/projects/vll/downloads/download/VLL4J.jar">VLL4J.jar</a>. 
</td></tr></table>

<p>
So that users may quickly become familiar with grammar-trees, 
<a href="">VisualLangLab</a> has some built-in sample grammars that can 
be inspected, edited, run, and even saved as external files. 
These grammars can be opened by invoking <i>Help -> Sample grammars</i> 
from the main menu as shown in Figure-1 below. 
There are three groups: 
<p>

<ul style="list-style-type: disc;">

  <li>those prefixed with <i>TDAR</i> are inspired by the chapter 3, 
      <i>A Quick Tour for the Impatient</i>, of the book 
      <a href="http://pragprog.com/book/tpantlr/the-definitive-antlr-reference">
      The Definitive ANTLR Reference</a> </li>
  <li>those prefixed with <i>PS2E</i> are based on examples in the chapter 
      <i>Combinator Parsing</i> of the book 
      <a href="http://www.artima.com/shop/programming_in_scala">Programming in Scala</a> </li>
  <li>the one prefixed with <i>PSWP</i> are based on the examples around page-240 
      of the book <a href="http://programmingscala.com/">Programming Scala</a> </li>
</ul>

<img src="images/SampleGrammar1.png" alt="Opening sample grammars" /><br/>
<i>Figure-1. Opening sample grammars</i>

    <p>
      The grammar-trees of these parsers are shown in the sub-sections below. 
      However, for best results readers should start 
      <a href="http://vll.java.net">VisualLangLab</a> and use its menus to 
      review the grammar-trees, understand the operations that can be performed on them, 
      and also run them using their own text input.
    </p>

    <h2>Reviewing a Parser</h2>

    <p>
      <a href="http://vll.java.net">VisualLangLab</a> provides numerous menus for 
      editing grammar-trees in parsers. Those same tools can also be used to review 
      the structure and properties of grammar-trees. When any of the built-in parsers 
      is opened, the tool-bar's ComboBox (shown deployed in Figure-2 below) 
      can be used to list the constituent parser-rules, and to select one of them.
    </p>

    <img src="images/GuiComboBox1.png" alt="Listing and selecting a grammar-tree" /><br/>
    <i>Figure-2. Listing and selecting a grammar-tree</i>

    <p>
      When a parser-rule is selected its grammar-tree is displayed. The arrangement, type, and 
      annotations of the nodes should be examined carefully. The grammar-tree with 
      its icons and annotations reveals most of the information about the corresponding 
      parser clause. However, certain other information (action-code for instance) 
      is not displayed unless the specific grammar-node tree is selected.
    </p>

    <h3>Grammar-Tree Icons & Annotations</h3>

    <p>
      The icons used in the grammar-tree are designed to be intuitive and meaningful 
      to anyone familiar with parsers, and are explained in 
      <a href="EditingTheGrammarTree.html">Editing the Grammar Tree</a>.
    </p>

    <h3>Parse-Tree (or AST)</h3>

    <p>
      The structure of the parse-tree (or <i>AST</i>) of the selected grammar-tree node 
      is displayed in the TextArea on the right of the grammar-tree. Observe that the 
      displayed information changes as different grammar-tree nodes are selected. 
      The format of the information displayed is described in 
      <a href="ASTAndActionCode.html">AST and Action Code</a>.
    </p>

    <h3 id="ActionCode">Action-Code</h3>

    <p>
      Action-code (a Javascript function assigned to a node to process its AST) 
      can be optionally associated with any grammar-tree node. 
      Action-code associated with any grammar-tree node is displayed (and edited) 
      in the TextArea on the right of the parse-tree.
      The design of action-code functions is described in 
      <a href="ASTAndActionCode.html">AST and Action Code</a>.
    </p>

    <h3 id="TestRunning">Test-Running a Parser</h3>

    <p>
      Figure-3 below shows the grammar-tree <i>expr</i> of the builtin <i>PS2E-ArithExpr</i> 
      parser being tested with the input text <i>12 / 3 + 5 * 4</i>. 
      To <i>test-run</i> the displayed grammar-tree just enter the test input 
      into the <i>Parser Test Input</i> area (as at "A" in Figure-3), 
      and click the <i>Parse input</i> toolbar button ("B" in the figure). 
      The results of the run (or any error messages) 
      appear in the <i>Parser Log</i> area ("C" in the figure).
    </p>

    <img src="images/TestingArithExpr1.png" alt="Testing a parser (or grammar-tree)" /><br/>
    <i>Figure-3. Testing a parser (or grammar-tree)</i>

    <p>
      More information about testing can be found in 
      <a href="TestingParsers.html">Testing Parsers</a>
    </p>

<h2 id="TheTDARParsers">The TDAR Parsers</h2>

<p>
The parsers inspired by the content of chapter 3, <i>A Quick Tour for the Impatient</i>, 
of the book <a href="http://pragprog.com/book/tpantlr/the-definitive-antlr-reference">
The Definitive ANTLR Reference</a> are described in detail in 
<a href="examples/a-quick-tour.html">A Quick Tour</a>
</p>

    <h2 id="ThePS2EArithExprParser">The PS2E-ArithExpr Parser</h2>

    <p>
      As mentioned elsewhere, the grammar trees in Figure-2 implement the following 
      grammar clauses:
    </p>

<code>
<pre>    expr ::= term {"*" term | "-" term}
    factor ::= floatingPointNumber | "(" expr ")"
    term ::= factor {"*" factor | "/" factor}</pre>
</code>

    <p>
      However, the process and knowledge used to transcribe a textual grammar 
      (as in the lines above) into a <i>grammar-tree</i> in 
      <a href="http://vll.java.net">VisualLangLab</a> is not described here. 
      That information can be found in 
      <a href="EditingTheGrammarTree.html">Editing the Grammar Tree</a>. 
      The purpose of this section is merely to provide a starting point that 
      new users can use to learn the tool's menus and options. 
      The grammar-trees of this parser have some optional but interesting features 
      that should be reviewed carefully. 
    </p>

    <table border="1" style="border: 1px solid black;">
      <tr><td style="text-align: center; font-weight: bold;">expr</td><td style="text-align: center; font-weight: bold;">factor</td><td style="text-align: center; font-weight: bold;">term</td></tr>
      <tr>
        <td style="padding: 0px"><img src="images/GrammarTreeExpr1.png" alt="The Expr grammar" /></td>
        <td style="padding: 0px"><img src="images/GrammarTreeFactor1.png" alt="The factor grammar" /></td>
        <td style="padding: 0px"><img src="images/GrammarTreeTerm1.png" alt="The term grammar" /></td></tr>
    </table>
    <i>Figure-4. Grammar-trees of the ArithExpr parser</i>

    <h2 id="ThePS2ESimpleJSONParser">The PS2E-SimpleJSON Parser</h2>

    <p>
      The grammar-trees of the SimpleJSON parser are shown in Figure-3 below for 
      easy reference.
    </p>

    <table border="1" style="border: 1px solid black;">
      <tr><td style="text-align: center; font-weight: bold;">value</td><td style="text-align: center; font-weight: bold;">arr</td><td style="text-align: center; font-weight: bold;">member</td><td style="text-align: center; font-weight: bold;">obj</td></tr>
      <tr>
        <td style="padding: 0px"><img src="images/SampleGrammarJsonValue.png" alt="The value grammar" /></td>
        <td style="padding: 0px"><img src="images/SampleGrammarJsonArr.png" alt="The arr grammar" /></td>
        <td style="padding: 0px"><img src="images/SampleGrammarJsonMember.png" alt="The member grammar" /></td>
        <td style="padding: 0px"><img src="images/SampleGrammarJsonObj.png" alt="The obj grammar" /></td></tr>
    </table>
    <i>Figure-5. Grammar-trees of the SimpleJSON parser</i>

    <p>
      Two of the grammar-trees in this parser (<i>arr</i> and <i>obj</i>) use a <i>RepSep</i> 
      node -- something not many parser enthusiasts know. 
      For more details see <a href="EditingTheGrammarTree.html">Editing the Grammar Tree</a>.
    </p>

    <h2 id="ThePS2EArithExprActionParser">The PS2E-ArithExpr-Action Parser</h2>

    <p>
      This grammar is identical to the <i>ArithExpr</i> grammar discussed above (and depicted in 
      Figure-4). While the grammars are structurally identical to the <i>ArithExpr</i> versions, 
      each one includes a snippet of <i>action-code</i> associated with the apex node 
      (the node just under the root-node). 
      The action-code can be seen in the <i>Action Code</i> area when the owning node is 
      selected as in Figure-6 below.
    </p>

    <img src="images/SampleGrammarWithActionCode1.png" alt="Action code associated with grammar-tree node" /><br/>
    <i>Figure-6. Action code associated with grammar-tree node</i>

    <p>
      All three grammar-trees use an action-code function at the top-level 
      (the node just below the root-node). The action-code of each grammar-tree can be displayed 
      by clicking the top-level node. Note that grammar-tree nodes with associated action-code 
      can be spotted by the presence of the <i>action</i> annotation (within square brackets 
      that group optional annotations).
    </p>

    <p>
      Also note the <i>drop</i> annotation (and the corresponding icon overlay) on several 
      literal tokens in all three grammar-trees. A <i>drop</i>ped part of a grammar-tree 
      contributes nothing to the AST -- though it is expected to be seen in the input. 
      The use of <i>drop</i> is explained fully in 
      <a href="EditingTheGrammarTree.html">Editing the Grammar Tree</a>.
    </p>

    <p>
      The action-code (explained fully in <a href="ASTAndActionCode.html">AST and Action Code</a>) 
      evaluates the AST (the result of parsing the arithmetic expression) to a number.
      The effect of this can be seen by testing the parser with the same input (<i>12 / 4 + 5 * 4</i>). 
      The parser's result should be <i>23.0</i>.
    </p>

  </body>
</html>
